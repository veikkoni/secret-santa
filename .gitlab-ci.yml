test:pylint:
    image: python:3.6
    before_script:
        - pip install pylint pylint-exit anybadge
    script:
        - mkdir ./pylint
        - mv main.py __init__.py
        - pylint --output-format=text . | tee ./pylint/pylint.log || pylint-exit $?
        - PYLINT_SCORE=$(sed -n 's/^Your code has been rated at \([-0-9.]*\)\/.*/\1/p' ./pylint/pylint.log)
        - anybadge --label=Pylint --file=pylint/pylint.svg --value=$PYLINT_SCORE 2=red 4=orange 8=yellow 10=green
        - echo "Pylint score is $PYLINT_SCORE"
    artifacts:
        paths:
            - ./pylint/
test:sonar:
   image:
    name: sonarsource/sonar-scanner-cli:latest
    entrypoint: [""]
   variables:
    SONAR_TOKEN: "530126e3ff58e26b71f33eaf91754eeb5bdf9059"
    SONAR_HOST_URL: "http://hoodienkuninkaat.com:9000"
   sonarqube-check:
    stage: test
    script:
       - sonar-scanner
    only:
       - merge_requests
       - branches
